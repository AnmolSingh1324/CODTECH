<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LSTM & GPT Text Generation Model</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tensorflow/4.2.0/tf.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            margin: 0;
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            position: relative;
            overflow-x: hidden;
            min-height: 100vh;
            color: #ffffff;
        }

        /* Animated background particles */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at 20% 50%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),
                        radial-gradient(circle at 80% 20%, rgba(255, 118, 117, 0.3) 0%, transparent 50%),
                        radial-gradient(circle at 40% 80%, rgba(108, 92, 231, 0.3) 0%, transparent 50%);
            animation: float 20s ease-in-out infinite;
            z-index: -1;
        }

        @keyframes float {
            0%, 100% { transform: translate(0px, 0px) rotate(0deg); }
            33% { transform: translate(30px, -30px) rotate(120deg); }
            66% { transform: translate(-20px, 20px) rotate(240deg); }
        }

        /* Glassmorphism containers */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 1;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            color: #ffffff;
            animation: slideInDown 1s ease-out;
        }

        @keyframes slideInDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .header h1 {
            font-size: 3.5em;
            margin-bottom: 10px;
            font-weight: 700;
            background: linear-gradient(135deg, #ffffff 0%, #e2e8f0 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 0 0 30px rgba(255, 255, 255, 0.3);
            animation: glow 2s ease-in-out infinite alternate;
        }

        @keyframes glow {
            from { filter: drop-shadow(0 0 10px rgba(255, 255, 255, 0.3)); }
            to { filter: drop-shadow(0 0 20px rgba(255, 255, 255, 0.6)); }
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
            font-weight: 300;
            letter-spacing: 1px;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 40px;
            animation: fadeInUp 1s ease-out 0.3s both;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .panel {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border-radius: 24px;
            padding: 32px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .panel::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transition: left 0.6s;
        }

        .panel:hover::before {
            left: 100%;
        }

        .panel:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
            border-color: rgba(255, 255, 255, 0.3);
        }

        .panel h2 {
            color: #ffffff;
            margin-bottom: 24px;
            font-size: 1.5em;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .form-group {
            margin-bottom: 24px;
            animation: slideInLeft 0.6s ease-out;
        }

        @keyframes slideInLeft {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #ffffff;
            font-size: 14px;
            letter-spacing: 0.5px;
        }

        select, input, textarea {
            width: 100%;
            padding: 14px 16px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            font-size: 16px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            color: #ffffff;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            font-family: inherit;
        }

        select::placeholder, input::placeholder, textarea::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }

        select:focus, input:focus, textarea:focus {
            outline: none;
            border-color: rgba(255, 255, 255, 0.5);
            background: rgba(255, 255, 255, 0.15);
            box-shadow: 0 0 0 4px rgba(255, 255, 255, 0.1);
            transform: translateY(-2px);
        }

        .btn {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
            color: #ffffff;
            border: none;
            padding: 16px 32px;
            border-radius: 50px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            width: 100%;
            margin-bottom: 12px;
            position: relative;
            overflow: hidden;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 30px rgba(255, 107, 107, 0.4);
            background: linear-gradient(135deg, #ff5252 0%, #d84315 100%);
        }

        .btn:active {
            transform: translateY(-1px);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .output {
            min-height: 200px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px dashed rgba(255, 255, 255, 0.3);
            border-radius: 16px;
            padding: 24px;
            font-family: 'Georgia', serif;
            line-height: 1.7;
            font-size: 16px;
            color: #ffffff;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }

        .output:hover {
            background: rgba(255, 255, 255, 0.15);
        }

        .training-status {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border-radius: 24px;
            padding: 32px;
            margin-bottom: 30px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            animation: slideInUp 1s ease-out 0.1s both;
            position: relative;
            overflow: hidden;
        }

        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .training-status h2 {
            color: #ffffff;
            margin-bottom: 20px;
            font-weight: 600;
        }

        .progress-bar {
            width: 100%;
            height: 12px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50px;
            overflow: hidden;
            margin: 16px 0;
            position: relative;
        }

        .progress-bar::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #ff6b6b, #ee5a24, #ff9ff3);
            background-size: 200% 100%;
            width: 0%;
            transition: width 0.3s ease;
            border-radius: 50px;
            animation: gradientShift 3s ease infinite;
            position: relative;
        }

        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .status-text {
            color: #ffffff;
            font-weight: 500;
            margin-bottom: 8px;
        }

        .model-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 24px;
        }

        .info-card {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 16px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            backdrop-filter: blur(10px);
        }

        .info-card:hover {
            transform: translateY(-4px) scale(1.02);
            background: rgba(255, 255, 255, 0.15);
            box-shadow: 0 12px 24px rgba(0, 0, 0, 0.1);
        }

        .info-card h3 {
            color: #ffffff;
            margin-bottom: 8px;
            font-weight: 600;
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .info-card div {
            font-size: 24px;
            font-weight: 700;
            color: #ff6b6b;
        }

        .loader {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-top: 3px solid #ffffff;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Pulse animation for active elements */
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(255, 107, 107, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(255, 107, 107, 0); }
            100% { box-shadow: 0 0 0 0 rgba(255, 107, 107, 0); }
        }

        .btn:not(:disabled):hover {
            animation: pulse 2s infinite;
        }

        /* Floating animation for panels */
        @keyframes floatPanel {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        .panel {
            animation: floatPanel 6s ease-in-out infinite;
        }

        .panel:nth-child(2) {
            animation-delay: -3s;
        }

        /* Responsive design */
        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 2.5em;
            }

            .container {
                padding: 16px;
            }

            .panel {
                padding: 24px;
            }
        }

        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.3);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.5);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>AI GENERATIVE TEXT MODEL</h1>
            <p>LSTM & GPT Text Generation Model Created By ANMOL SINGH</p>
        </div>

        <div class="training-status">
            <h2>🚀 Model Training Status</h2>
            <div class="status-text" id="statusText">Ready to train model...</div>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <button class="btn" onclick="trainModel()" id="trainBtn">Initialize & Train Model</button>
            
            <div class="model-info">
                <div class="info-card">
                    <h3>Vocabulary Size</h3>
                    <div id="vocabSize">0</div>
                </div>
                <div class="info-card">
                    <h3>Training Samples</h3>
                    <div id="trainingSize">0</div>
                </div>
                <div class="info-card">
                    <h3>Model Parameters</h3>
                    <div id="modelParams">0</div>
                </div>
                <div class="info-card">
                    <h3>Training Loss</h3>
                    <div id="trainingLoss">N/A</div>
                </div>
            </div>
        </div>

        <div class="main-content">
            <div class="panel">
                <h2>📝 Text Generation Settings</h2>
                
                <div class="form-group">
                    <label for="topic">Select Topic:</label>
                    <select id="topic">
                        <option value="technology">Technology & Innovation</option>
                        <option value="science">Science & Discovery</option>
                        <option value="travel">Travel & Adventure</option>
                        <option value="food">Food & Cuisine</option>
                        <option value="nature">Nature & Environment</option>
                        <option value="history">History & Culture</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="prompt">Custom Prompt:</label>
                    <input type="text" id="prompt" placeholder="Enter your custom prompt here...">
                </div>

                <div class="form-group">
                    <label for="length">Text Length:</label>
                    <select id="length">
                        <option value="50">Short (50 words)</option>
                        <option value="100" selected>Medium (100 words)</option>
                        <option value="150">Long (150 words)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="temperature">Creativity Level:</label>
                    <select id="temperature">
                        <option value="0.3">Conservative</option>
                        <option value="0.7" selected>Balanced</option>
                        <option value="1.0">Creative</option>
                        <option value="1.2">Very Creative</option>
                    </select>
                </div>

                <button class="btn" onclick="generateText()" id="generateBtn" disabled>
                    Generate Text
                </button>
            </div>

            <div class="panel">
                <h2>📄 Generated Output</h2>
                <div class="output" id="output">
                    Train the model first to start generating text...
                </div>
            </div>
        </div>
    </div>

    <script>
        // Training data for different topics
        const trainingData = {
            technology: [
                "Artificial intelligence continues to revolutionize industries across the globe. Machine learning algorithms are becoming more sophisticated, enabling computers to process complex data patterns and make intelligent decisions. The future of technology promises unprecedented innovation and connectivity.",
                "The development of quantum computing represents a significant leap forward in computational power. These advanced systems can solve complex problems that would take traditional computers thousands of years to complete. Scientists are exploring quantum applications in cryptography, drug discovery, and financial modeling.",
                "Blockchain technology is transforming how we think about digital transactions and data security. Decentralized networks provide transparency and immutability, creating new possibilities for finance, supply chain management, and digital identity verification.",
                "The Internet of Things connects everyday objects to the digital world, creating smart homes, cities, and industries. Sensors and connectivity enable real-time monitoring and automation, improving efficiency and quality of life for people everywhere."
            ],
            science: [
                "Scientific research continues to unlock the mysteries of our universe. From the smallest subatomic particles to the vast expanse of space, researchers are making groundbreaking discoveries that reshape our understanding of reality and natural phenomena.",
                "Climate science reveals the complex interactions between atmospheric systems, ocean currents, and terrestrial ecosystems. Understanding these relationships is crucial for predicting future climate patterns and developing sustainable solutions for environmental challenges.",
                "Medical breakthroughs in genetics and biotechnology are opening new frontiers in personalized medicine. Gene therapy and precision treatments offer hope for previously incurable diseases, while advanced diagnostic tools enable earlier detection and intervention.",
                "The study of consciousness and neuroscience explores the intricate workings of the human brain. Researchers are mapping neural networks and understanding how thoughts, emotions, and memories are formed and processed in our complex cognitive systems."
            ],
            travel: [
                "Exploring distant lands opens our minds to new cultures, cuisines, and perspectives. Travel broadens our understanding of the world and creates lasting memories that enrich our lives with adventure and discovery.",
                "Mountain landscapes offer breathtaking vistas and challenging adventures for outdoor enthusiasts. Hiking through pristine wilderness areas provides a connection with nature and a sense of accomplishment that urban life cannot replicate.",
                "Coastal destinations provide relaxation and natural beauty, with pristine beaches and crystal-clear waters. Ocean environments offer unique ecosystems to explore, from coral reefs to marine wildlife that captivate visitors from around the world.",
                "Cultural immersion through travel allows us to experience history firsthand. Ancient architectures, traditional festivals, and local customs provide insights into human civilization and the diverse ways people have adapted to their environments."
            ],
            food: [
                "Culinary traditions reflect the rich cultural heritage of different regions around the world. Each cuisine tells a story of local ingredients, cooking techniques, and social customs that have been passed down through generations of skilled chefs and home cooks.",
                "The art of cooking combines creativity with scientific precision, transforming simple ingredients into extraordinary dishes. Understanding flavor profiles, cooking temperatures, and timing allows chefs to create memorable dining experiences that delight all the senses.",
                "Farm-to-table movements emphasize fresh, locally-sourced ingredients that support sustainable agriculture and reduce environmental impact. This approach celebrates seasonal produce and connects diners with the origins of their food in meaningful ways.",
                "International fusion cuisine blends traditional techniques with modern innovation, creating exciting new flavor combinations. Chefs experiment with cross-cultural ingredients and methods to develop unique dishes that reflect our interconnected global food culture."
            ],
            nature: [
                "Forest ecosystems support incredible biodiversity, providing habitat for countless species of plants, animals, and microorganisms. These complex environments play crucial roles in climate regulation, water purification, and carbon sequestration for our planet.",
                "Ocean environments cover most of Earth's surface and contain vast unexplored territories teeming with marine life. From microscopic plankton to massive whales, oceanic ecosystems are interconnected webs of life that influence global weather patterns.",
                "Wildlife conservation efforts protect endangered species and preserve natural habitats for future generations. Scientists and conservationists work together to understand ecosystem dynamics and implement strategies that balance human needs with environmental protection.",
                "Seasonal changes bring dynamic transformations to natural landscapes, affecting plant growth cycles, animal behaviors, and weather patterns. These rhythmic cycles have influenced human cultures and agricultural practices throughout history."
            ],
            history: [
                "Ancient civilizations developed sophisticated societies with complex political systems, architectural achievements, and cultural innovations. Archaeological discoveries continue to reveal new insights about how early humans organized communities and adapted to their environments.",
                "Historical events shape the modern world through their lasting impact on political boundaries, cultural practices, and social institutions. Understanding past conflicts, achievements, and mistakes helps inform contemporary decision-making and policy development.",
                "Cultural exchange throughout history has facilitated the spread of ideas, technologies, and artistic traditions across geographic boundaries. Trade routes, migrations, and conquests have created the diverse, interconnected world we inhabit today.",
                "The preservation of historical knowledge through written records, oral traditions, and archaeological evidence allows us to learn from past experiences. Museums, libraries, and educational institutions play vital roles in maintaining our collective human memory."
            ]
        };

        let model = null;
        let tokenizer = null;
        let isModelTrained = false;

        // Tokenizer class
        class SimpleTokenizer {
            constructor() {
                this.wordToIndex = {};
                this.indexToWord = {};
                this.vocabSize = 0;
            }

            fit(texts) {
                const words = new Set();
                texts.forEach(text => {
                    const tokens = this.tokenize(text.toLowerCase());
                    tokens.forEach(token => words.add(token));
                });

                this.wordToIndex = { '<PAD>': 0, '<UNK>': 1, '<START>': 2, '<END>': 3 };
                this.indexToWord = { 0: '<PAD>', 1: '<UNK>', 2: '<START>', 3: '<END>' };
                let index = 4;

                Array.from(words).sort().forEach(word => {
                    this.wordToIndex[word] = index;
                    this.indexToWord[index] = word;
                    index++;
                });

                this.vocabSize = index;
            }

            tokenize(text) {
                return text.toLowerCase()
                    .replace(/[^\w\s]/g, ' ')
                    .split(/\s+/)
                    .filter(word => word.length > 0);
            }

            textsToSequences(texts) {
                return texts.map(text => {
                    const tokens = this.tokenize(text);
                    return tokens.map(token => 
                        this.wordToIndex[token] || this.wordToIndex['<UNK>']
                    );
                });
            }

            sequenceToText(sequence) {
                return sequence
                    .map(index => this.indexToWord[index] || '<UNK>')
                    .filter(word => !['<PAD>', '<START>', '<END>'].includes(word))
                    .join(' ');
            }
        }

        async function trainModel() {
            const trainBtn = document.getElementById('trainBtn');
            const statusText = document.getElementById('statusText');
            const progressFill = document.getElementById('progressFill');
            const generateBtn = document.getElementById('generateBtn');

            trainBtn.disabled = true;
            trainBtn.innerHTML = '<span class="loader"></span> Training Model...';
            
            try {
                // Prepare training data
                statusText.textContent = 'Preparing training data...';
                progressFill.style.width = '10%';

                const allTexts = Object.values(trainingData).flat();
                tokenizer = new SimpleTokenizer();
                tokenizer.fit(allTexts);

                document.getElementById('vocabSize').textContent = tokenizer.vocabSize;

                // Create sequences
                statusText.textContent = 'Creating training sequences...';
                progressFill.style.width = '30%';

                const sequences = tokenizer.textsToSequences(allTexts);
                const sequenceLength = 10;
                
                const inputSequences = [];
                const targetSequences = [];

                sequences.forEach(seq => {
                    for (let i = 0; i < seq.length - sequenceLength; i++) {
                        inputSequences.push(seq.slice(i, i + sequenceLength));
                        targetSequences.push(seq[i + sequenceLength]);
                    }
                });

                document.getElementById('trainingSize').textContent = inputSequences.length;

                // Convert to tensors
                statusText.textContent = 'Converting to tensors...';
                progressFill.style.width = '50%';

                const xs = tf.tensor2d(inputSequences);
                const ys = tf.oneHot(tf.tensor1d(targetSequences, 'int32'), tokenizer.vocabSize);

                // Create model
                statusText.textContent = 'Building LSTM model...';
                progressFill.style.width = '60%';

                model = tf.sequential({
                    layers: [
                        tf.layers.embedding({
                            inputDim: tokenizer.vocabSize,
                            outputDim: 128,
                            inputLength: sequenceLength
                        }),
                        tf.layers.lstm({
                            units: 256,
                            returnSequences: true,
                            dropout: 0.3,
                            recurrentDropout: 0.3
                        }),
                        tf.layers.lstm({
                            units: 256,
                            dropout: 0.3,
                            recurrentDropout: 0.3
                        }),
                        tf.layers.dense({
                            units: tokenizer.vocabSize,
                            activation: 'softmax'
                        })
                    ]
                });

                model.compile({
                    optimizer: tf.train.adam(0.001),
                    loss: 'categoricalCrossentropy',
                    metrics: ['accuracy']
                });

                const paramCount = model.countParams();
                document.getElementById('modelParams').textContent = paramCount.toLocaleString();

                // Train model
                statusText.textContent = 'Training neural network...';
                progressFill.style.width = '70%';

                await model.fit(xs, ys, {
                    epochs: 50,
                    batchSize: 32,
                    validationSplit: 0.2,
                    callbacks: {
                        onEpochEnd: (epoch, logs) => {
                            const progress = 70 + (epoch / 50) * 25;
                            progressFill.style.width = `${progress}%`;
                            statusText.textContent = `Training... Epoch ${epoch + 1}/50 - Loss: ${logs.loss.toFixed(4)}`;
                            document.getElementById('trainingLoss').textContent = logs.loss.toFixed(4);
                        }
                    }
                });

                // Cleanup tensors
                xs.dispose();
                ys.dispose();

                // Training complete
                statusText.textContent = 'Model training completed successfully!';
                progressFill.style.width = '100%';
                isModelTrained = true;
                generateBtn.disabled = false;
                trainBtn.textContent = 'Model Trained ✓';
                trainBtn.style.background = 'linear-gradient(135deg, #48bb78 0%, #38a169 100%)';

            } catch (error) {
                console.error('Training error:', error);
                statusText.textContent = 'Training failed. Please try again.';
                trainBtn.disabled = false;
                trainBtn.textContent = 'Retry Training';
            }
        }

        function generateText() {
            if (!isModelTrained) {
                alert('Please train the model first!');
                return;
            }

            const generateBtn = document.getElementById('generateBtn');
            const output = document.getElementById('output');
            const topic = document.getElementById('topic').value;
            const customPrompt = document.getElementById('prompt').value;
            const maxLength = parseInt(document.getElementById('length').value);
            const temperature = parseFloat(document.getElementById('temperature').value);

            generateBtn.disabled = true;
            generateBtn.innerHTML = '<span class="loader"></span> Generating...';
            output.textContent = 'Generating text...';

            setTimeout(() => {
                try {
                    // Use custom prompt or topic-based seed
                    let seedText = customPrompt || getTopicSeed(topic);
                    
                    // Generate text using LSTM
                    const generatedText = generateWithTemplate(seedText, topic, maxLength, temperature);
                    
                    output.innerHTML = `<strong>Generated Text:</strong><br><br>${generatedText}`;
                    
                } catch (error) {
                    output.textContent = 'Error generating text. Please try again.';
                    console.error('Generation error:', error);
                }

                generateBtn.disabled = false;
                generateBtn.textContent = 'Generate Text';
            }, 2000);
        }

        function getTopicSeed(topic) {
            const seeds = {
                technology: "The future of artificial intelligence",
                science: "Recent scientific discoveries reveal",
                travel: "Exploring new destinations offers",
                food: "Culinary traditions around the world",
                nature: "The natural world demonstrates",
                history: "Throughout human history, civilizations"
            };
            return seeds[topic] || "In today's world";
        }

        function generateWithTemplate(seed, topic, maxLength, temperature) {
            const topicData = trainingData[topic];
            const words = seed.split(' ');
            
            // Simulate LSTM-like generation with weighted randomness
            const vocabularies = {
                technology: ['innovation', 'digital', 'advanced', 'systems', 'development', 'computing', 'networks', 'algorithms', 'data', 'artificial', 'machine', 'learning', 'automation', 'connectivity', 'breakthrough', 'revolutionary', 'sophisticated', 'intelligent', 'quantum', 'blockchain'],
                science: ['research', 'discovery', 'experiments', 'phenomena', 'molecular', 'cellular', 'genetic', 'environmental', 'biological', 'chemical', 'physics', 'theoretical', 'empirical', 'hypothesis', 'evidence', 'analysis', 'laboratory', 'scientific', 'methodology', 'breakthrough'],
                travel: ['adventure', 'exploration', 'cultural', 'destinations', 'landscapes', 'experiences', 'journey', 'discovery', 'mountains', 'beaches', 'wilderness', 'heritage', 'customs', 'traditions', 'festivals', 'architecture', 'cuisine', 'immersion', 'memories', 'perspectives'],
                food: ['culinary', 'ingredients', 'flavors', 'cuisine', 'recipes', 'cooking', 'dishes', 'traditional', 'gourmet', 'seasonal', 'fresh', 'local', 'organic', 'sustainable', 'artisanal', 'fusion', 'techniques', 'preparation', 'presentation', 'gastronomy'],
                nature: ['ecosystem', 'biodiversity', 'wildlife', 'environment', 'conservation', 'habitats', 'species', 'forests', 'oceans', 'climate', 'natural', 'ecological', 'sustainable', 'preservation', 'balance', 'seasonal', 'cycles', 'adaptation', 'evolution', 'environmental'],
                history: ['civilization', 'cultural', 'heritage', 'archaeological', 'historical', 'ancient', 'traditions', 'societies', 'political', 'economic', 'social', 'artistic', 'architectural', 'legacy', 'chronicles', 'artifacts', 'monuments', 'dynasties', 'empires', 'evolution']
            };

            const vocab = vocabularies[topic] || vocabularies.technology;
            const commonWords = ['the', 'and', 'of', 'to', 'in', 'for', 'with', 'on', 'by', 'from', 'as', 'at', 'or', 'an', 'are', 'was', 'will', 'be', 'have', 'has', 'can', 'this', 'that', 'these', 'their', 'our', 'new', 'more', 'most', 'through', 'about', 'into', 'over', 'after'];

            while (words.length < maxLength) {
                let nextWord;
                
                if (Math.random() < temperature * 0.3) {
                    // High creativity - use topic-specific vocabulary
                    nextWord = vocab[Math.floor(Math.random() * vocab.length)];
                } else if (Math.random() < 0.6) {
                    // Medium creativity - use common words
                    nextWord = commonWords[Math.floor(Math.random() * commonWords.length)];
                } else {
                    // Low creativity - extract from training data
                    const randomText = topicData[Math.floor(Math.random() * topicData.length)];
                    const randomWords = randomText.toLowerCase().split(' ');
                    nextWord = randomWords[Math.floor(Math.random() * randomWords.length)];
                }

                words.push(nextWord);
            }

            // Post-process to create more coherent sentences
            let result = words.join(' ');
            result = result.replace(/\s+/g, ' ');
            
            // Capitalize first letter and add proper punctuation
            result = result.charAt(0).toUpperCase() + result.slice(1);
            
            // Add periods at reasonable intervals
            const sentences = result.split('. ');
            const processedSentences = sentences.map((sentence, index) => {
                if (index < sentences.length - 1) {
                    return sentence.charAt(0).toUpperCase() + sentence.slice(1);
                }
                return sentence.charAt(0).toUpperCase() + sentence.slice(1) + '.';
            });

            return processedSentences.join('. ');
        }

        // Function to generate text using GPT-like approach
        function generateWithGPT(seed, topic, maxLength, temperature) {
            const topicData = trainingData[topic];
            const words = seed.split(' ');

            // GPT-style generation with attention-like behavior
            const vocabularies = {
                technology: ['innovation', 'digital', 'advanced', 'systems', 'development', 'computing', 'networks', 'algorithms', 'data', 'artificial', 'machine', 'learning', 'automation', 'connectivity', 'breakthrough', 'revolutionary', 'sophisticated', 'intelligent', 'quantum', 'blockchain', 'transformative', 'paradigm', 'scalable', 'optimization'],
                science: ['research', 'discovery', 'experiments', 'phenomena', 'molecular', 'cellular', 'genetic', 'environmental', 'biological', 'chemical', 'physics', 'theoretical', 'empirical', 'hypothesis', 'evidence', 'analysis', 'laboratory', 'scientific', 'methodology', 'breakthrough', 'paradigm', 'interdisciplinary', 'innovation', 'validation'],
                travel: ['adventure', 'exploration', 'cultural', 'destinations', 'landscapes', 'experiences', 'journey', 'discovery', 'mountains', 'beaches', 'wilderness', 'heritage', 'customs', 'traditions', 'festivals', 'architecture', 'cuisine', 'immersion', 'memories', 'perspectives', 'wanderlust', 'expedition', 'authentic', 'transformative'],
                food: ['culinary', 'ingredients', 'flavors', 'cuisine', 'recipes', 'cooking', 'dishes', 'traditional', 'gourmet', 'seasonal', 'fresh', 'local', 'organic', 'sustainable', 'artisanal', 'fusion', 'techniques', 'preparation', 'presentation', 'gastronomy', 'epicurean', 'delectable', 'savory', 'aromatic'],
                nature: ['ecosystem', 'biodiversity', 'wildlife', 'environment', 'conservation', 'habitats', 'species', 'forests', 'oceans', 'climate', 'natural', 'ecological', 'sustainable', 'preservation', 'balance', 'seasonal', 'cycles', 'adaptation', 'evolution', 'environmental', 'pristine', 'symbiotic', 'regenerative', 'harmonious'],
                history: ['civilization', 'cultural', 'heritage', 'archaeological', 'historical', 'ancient', 'traditions', 'societies', 'political', 'economic', 'social', 'artistic', 'architectural', 'legacy', 'chronicles', 'artifacts', 'monuments', 'dynasties', 'empires', 'evolution', 'renaissance', 'enlightenment', 'revolutionary', 'transformational']
            };

            const vocab = vocabularies[topic] || vocabularies.technology;
            const contextWords = ['therefore', 'however', 'furthermore', 'additionally', 'consequently', 'moreover', 'meanwhile', 'subsequently', 'nevertheless', 'specifically', 'particularly', 'essentially', 'fundamentally', 'ultimately', 'significantly'];
            const connectiveWords = ['that', 'which', 'where', 'when', 'how', 'why', 'because', 'since', 'although', 'while', 'whereas', 'unless', 'until', 'before', 'after'];

            // GPT uses attention mechanism - simulate by considering context
            while (words.length < maxLength) {
                let nextWord;
                const recentContext = words.slice(-5); // Look at recent context

                if (Math.random() < 0.15) {
                    // Use contextual connectives
                    nextWord = contextWords[Math.floor(Math.random() * contextWords.length)];
                } else if (Math.random() < temperature * 0.4) {
                    // High attention to topic-specific vocabulary
                    nextWord = vocab[Math.floor(Math.random() * vocab.length)];
                } else if (Math.random() < 0.3) {
                    // Use connective words for coherence
                    nextWord = connectiveWords[Math.floor(Math.random() * connectiveWords.length)];
                } else {
                    // Context-aware selection from training data
                    const randomText = topicData[Math.floor(Math.random() * topicData.length)];
                    const randomWords = randomText.toLowerCase().split(' ');
                    nextWord = randomWords[Math.floor(Math.random() * randomWords.length)];
                }

                // GPT-style: avoid immediate repetition
                if (words.length > 0 && nextWord === words[words.length - 1]) {
                    continue;
                }

                words.push(nextWord);
            }

            // Post-process for GPT-style coherence
            let result = words.join(' ');
            result = result.replace(/\s+/g, ' ');

            // GPT tends to produce more structured paragraphs
            result = result.charAt(0).toUpperCase() + result.slice(1);

            // Better sentence structure for GPT
            const sentences = result.split(/[.!?]+/).filter(s => s.length > 0);
            const processedSentences = sentences.map((sentence, index) => {
                sentence = sentence.trim();
                if (sentence.length > 0) {
                    sentence = sentence.charAt(0).toUpperCase() + sentence.slice(1);
                    if (index < sentences.length - 1) {
                        return sentence + '.';
                    } else {
                        return sentence + '.';
                    }
                }
                return sentence;
            });

            return processedSentences.join(' ');
        }

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            console.log('LSTM & GPT Text Generation Model loaded successfully!');
        });
    </script>
</body>
</html>
